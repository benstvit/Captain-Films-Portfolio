<div class='bands-container'>
  <h1>Music Projects</h1>
  <%= @bands.each do |band| %>
    <div class='band-title'>
      <h2><%= band.name.upcase %></h2>
    </div>
    <div class='band-container'>
      <div class='band-img' data-id= "<%= band.id %>" >
        <%= link_to cl_image_tag(band.image.key), band_path(band) %>
      </div>
      <div class='band-description slide-in' data-id= "<%= band.id %>">
        <p><%= band.description %></p>
        <div class="links">
          <a class='sm-link' href="<%= band.spotify_url%>" target="_blank" %><i class="fa-brands fa-spotify display2"></i></a>
          <a class='sm-link' href="<%= band.facebook_url%>" target="_blank" %><i class="fa-brands fa-facebook-square"></i></a>
          <a class='sm-link' href="<%= band.youtube_url%>" target="_blank" %><i class="fa-brands fa-youtube-square"></i></a>
        </div>
        <div class="play-music">
          <%# <button onclick="playSong()" class='nav-btn p-2'> Play random song</button> %>
        </div>
      </div>
    </div>
      <% if policy(:band).destroy? %>
        <%= link_to "Delete #{band.name}", band_path(band), method: :delete, data: { confirm: "Are you sure?" }, class: 'btn btn-success m-3' %>
      <% end %>
      <% if policy(:band).update? %>
        <%= link_to "Edit #{band.name}", edit_band_path(band), class: 'btn btn-success m-3' %>
      <% end %>
  <% end %>
</div>

<script>
// SLIDE IN
const bandImages = document.querySelectorAll('.band-img')
const bandDescriptions = document.querySelectorAll('.band-description')

function translate(e) {
  if(e.type === 'mouseover') {
    console.log('hey I m working')
    bandDescriptions.forEach(description => description.classList.remove('no-transition'))
    this.classList.add('hover')
    setTimeout(() => {
      bandDescriptions.forEach((description) => {
        if(this.dataset.id === description.dataset.id)
        description.classList.add('active')
        })
    }, 600);
    transitionFinished = true
  }
}

bandImages.forEach(bandImage => bandImage.addEventListener('mouseover', translate))

</script>
